# 開発者ガイド

このドキュメントは、開発時におけるコーディング規約・開発フローなどをまとめるものです。

## 環境構築

環境構築には以下が必要です。

- Docker: 推論サーバの立ち上げに必要です。

## コーディング規約

### スタイル

言語ごとに設定されているフォーマッターの定める規約に従わなければなりません。コミット前に各フォーマッターを実行し、規約に従っていることを確認してください。

また、実装はモジュール結合度を低く保ち、DRY原則など、可能な限り一般的なコーディングのベストプラクティスに従うことが求められます。

### 型アノテーション

型をサポートするいずれの言語を使用する場合でも、可能な限り型を明示しなければなりません。明確な理由が無い限り、`Any`のような曖昧な型を使うべきではありません。

### テスト

各言語で使用されているテストフレームワークを用いて、実装箇所に対応するテストコードを**可能な限り**書かなければなりません。関数内の条件分岐を可能な限り網羅することが求められます。

### コミットメッセージ

[Conventional Commits 1.0.0](https://www.conventionalcommits.org/ja/v1.0.0/)形式に従い、日本語または英語（日本語話者ではない場合）で記述しなければなりません。

一例として、以下のようなtypeを指定可能です。

- `fix`: バグの修正パッチ
- `feat`: 新機能の追加
- `docs`: ドキュメントの更新
- `style`: コードのスタイルの変更（セミコロンの追加や改行の修正など）
- `refactor`: コードのリファクタリング（バグの修正や機能の追加は含まない）
- `test`: テストの追加・修正
- `ci`: CI/CD の設定の変更
- `chore`: その他の変更

このため、コミットメッセージは以下のような形式となります。

```bash
feat: XXXを追加

<必要であれば追加情報>
```

## CI/CD

本プロジェクトではGitHub Actionsを用いて、継続的インテグレーション(CI)を構成しています。

実装箇所に対応するCIが構成されていない場合は、併せて構成しなければなりません。フォーマットチェック・Lint・ビルド・テストなどが実行されることが期待されます。

## 開発フロー

実装に着手する前に、Issueを起票します。Writeアクセスを持つ場合は、希望するタスクに自分自身をアサインします。[プロジェクト](https://github.com/orgs/hazumu-ai/projects/1)でのステータスも適切に変更してください。

ブランチ運用ルールは[GitHub Flow](https://docs.github.com/ja/get-started/using-github/github-flow)に従います。mainブランチからチェックアウトし、mainブランチに対してPull Requestを発行します。発行前に、セルフレビューや、各種Formatter/Linter/Testなどを実行し、問題が無いことを確認することが求められます。

Pull RequestのタイトルはConventional Commitsに従う必要があります。

発行されたPull Requestは、一人以上のメンテナーによってレビューされます。また、CIが通過していないとマージすることはできません。

## ドキュメント運用

`docs/`ディレクトリにプロジェクトに関するドキュメントが集約されます。また、`AGENTS.md`などがAI向けのドキュメントとして整備されます。いずれもコードの変更に対応するようにドキュメントを更新しなければなりません。

`docs/`以下は、各コンポーネントごとにディレクトリを分けて管理されます。

## 開発者行動規範

本プロジェクトは、すべての貢献者が敬意と協調をもって開発できる環境を目指します。
議論・レビュー・提案は建設的に行われなければなりません。
不適切な発言やハラスメント行為は一切許容されません。
